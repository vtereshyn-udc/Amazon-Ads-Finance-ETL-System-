<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon ETL System v5</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin: 0 auto; height: 280px; }
        .tab-btn.active { background-color: #3b82f6; color: white; }
        .lang-btn.active { background-color: #3b82f6; color: white; }
        .telegram-msg { font-family: -apple-system, sans-serif; background: #1e2a38; border-radius: 12px; padding: 12px 16px; max-width: 320px; }
        .schedule-item:hover { transform: translateX(4px); background: rgba(59, 130, 246, 0.1); }
    </style>
</head>
<body class="text-slate-800 h-screen flex flex-col md:flex-row overflow-hidden bg-slate-50">

    <!-- Sidebar -->
    <aside class="w-full md:w-64 bg-slate-900 text-white flex-shrink-0 flex flex-col">
        <div class="p-6 border-b border-slate-800">
            <div class="flex items-center justify-between mb-2">
                <h1 class="text-xl font-bold flex items-center gap-2">
                    <i class="fa-solid fa-network-wired text-blue-400"></i> ETL v5
                </h1>
                <div class="flex gap-1">
                    <button onclick="switchLang('en')" class="lang-btn px-2 py-1 text-xs rounded bg-slate-700 hover:bg-slate-600 active" id="lang-en">EN</button>
                    <button onclick="switchLang('uk')" class="lang-btn px-2 py-1 text-xs rounded bg-slate-700 hover:bg-slate-600" id="lang-uk">UA</button>
                </div>
            </div>
            <p class="text-slate-400 text-xs mt-1" data-en="Amazon Data Pipeline" data-uk="Amazon Ğ”Ğ°Ñ‚Ğ° ĞšĞ¾Ğ½Ğ²ĞµÑ”Ñ€">Amazon Data Pipeline</p>
        </div>
        
        <nav class="flex-1 overflow-y-auto p-4 space-y-2">
            <button onclick="switchTab('overview')" class="tab-btn w-full text-left px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-colors active" id="btn-overview">
                <i class="fa-solid fa-chart-line w-6"></i> <span data-en="Dashboard" data-uk="Ğ”Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´">Dashboard</span>
            </button>
            <button onclick="switchTab('execution')" class="tab-btn w-full text-left px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-colors" id="btn-execution">
                <i class="fa-solid fa-clock-rotate-left w-6"></i> <span data-en="Execution" data-uk="Ğ’Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ½Ñ">Execution</span>
            </button>
            <button onclick="switchTab('architecture')" class="tab-btn w-full text-left px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-colors" id="btn-architecture">
                <i class="fa-solid fa-sitemap w-6"></i> <span data-en="Architecture" data-uk="ĞÑ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°">Architecture</span>
            </button>
            <button onclick="switchTab('features')" class="tab-btn w-full text-left px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-colors" id="btn-features">
                <i class="fa-solid fa-list-check w-6"></i> <span data-en="Features" data-uk="ĞœĞ¾Ğ¶Ğ»Ğ¸Ğ²Ğ¾ÑÑ‚Ñ–">Features</span>
            </button>
            <button onclick="switchTab('logic')" class="tab-btn w-full text-left px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-colors" id="btn-logic">
                <i class="fa-solid fa-microchip w-6"></i> <span data-en="Logic & API" data-uk="Ğ›Ğ¾Ğ³Ñ–ĞºĞ° Ñ‚Ğ° API">Logic & API</span>
            </button>
        </nav>

        <div class="p-4 border-t border-slate-800 text-xs text-slate-500">
            <div class="flex items-center gap-2 mb-2">
                <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                <span data-en="System Active" data-uk="Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ°">System Active</span>
            </div>
            <div class="flex items-center gap-2">
                <i class="fa-brands fa-telegram text-blue-400"></i>
                <span>3 <span data-en="subscribers" data-uk="Ğ¿Ñ–Ğ´Ğ¿Ğ¸ÑĞ½Ğ¸ĞºÑ–Ğ²">subscribers</span></span>
            </div>
            <div class="mt-2 text-slate-600">v5.0.0 Unified</div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto p-4 md:p-8">
        
        <header class="mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4">
            <div>
                <h2 class="text-2xl font-bold text-slate-900" data-en="Unified ETL System" data-uk="Ğ„Ğ´Ğ¸Ğ½Ğ° ETL Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ°">Unified ETL System</h2>
                <p class="text-slate-500 text-sm" data-en="Amazon Ads + SP-API â€¢ Self-Healing â€¢ Zero Maintenance" data-uk="Amazon Ads + SP-API â€¢ Ğ¡Ğ°Ğ¼Ğ¾Ğ²Ñ–Ğ´Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ â€¢ ĞÑƒĞ»ÑŒ Ğ¾Ğ±ÑĞ»ÑƒĞ³Ğ¾Ğ²ÑƒĞ²Ğ°Ğ½Ğ½Ñ">Amazon Ads + SP-API â€¢ Self-Healing â€¢ Zero Maintenance</p>
            </div>
            <div class="flex flex-wrap gap-2">
                <span class="px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-semibold"><i class="fa-solid fa-check mr-1"></i> <span data-en="Production" data-uk="ĞŸÑ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½">Production</span></span>
                <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold"><i class="fa-solid fa-robot mr-1"></i> <span data-en="Silent Mode" data-uk="Ğ¢Ğ¸Ñ…Ğ¸Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼">Silent Mode</span></span>
            </div>
        </header>

        <!-- 1. DASHBOARD -->
        <div id="view-overview" class="space-y-6">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <div class="text-slate-400 text-xs font-bold uppercase mb-2" data-en="Daily Syncs" data-uk="Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ñ–Ğ·Ğ°Ñ†Ñ–Ğ¹">Daily Syncs</div>
                    <div class="text-3xl font-bold text-slate-800">11</div>
                    <div class="text-xs text-slate-500 mt-1">5 ADS + 6 SP-API</div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <div class="text-slate-400 text-xs font-bold uppercase mb-2" data-en="Reports" data-uk="Ğ—Ğ²Ñ–Ñ‚Ñ–Ğ²">Reports</div>
                    <div class="text-3xl font-bold text-slate-800">30+</div>
                    <div class="text-xs text-slate-500 mt-1" data-en="Types" data-uk="Ğ¢Ğ¸Ğ¿Ñ–Ğ²">Types</div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <div class="text-slate-400 text-xs font-bold uppercase mb-2" data-en="Uptime" data-uk="ĞĞ¿Ñ‚Ğ°Ğ¹Ğ¼">Uptime</div>
                    <div class="text-3xl font-bold text-emerald-600">99.9%</div>
                    <div class="text-xs text-emerald-600 mt-1" data-en="Self-Healing" data-uk="Ğ¡Ğ°Ğ¼Ğ¾Ğ²Ñ–Ğ´Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ">Self-Healing</div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <div class="text-slate-400 text-xs font-bold uppercase mb-2" data-en="Alerts" data-uk="Ğ¡Ğ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ">Alerts</div>
                    <div class="text-3xl font-bold text-slate-800" data-en="Silent" data-uk="Ğ¢Ğ¸ÑˆĞ°">Silent</div>
                    <div class="text-xs text-emerald-600 mt-1">âœ“ <span data-en="All OK" data-uk="Ğ’ÑĞµ ĞĞš">All OK</span></div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-lg mb-4 text-slate-800 flex items-center gap-2">
                        <span class="w-3 h-3 bg-orange-400 rounded-full"></span>
                        <span data-en="ADS API Schedule (Kyiv)" data-uk="ADS API Ğ Ğ¾Ğ·ĞºĞ»Ğ°Ğ´ (ĞšĞ¸Ñ—Ğ²)">ADS API Schedule (Kyiv)</span>
                    </h3>
                    <div class="space-y-2">
                        <div class="schedule-item flex items-center justify-between p-3 bg-slate-50 rounded-lg transition-all">
                            <div class="flex items-center gap-3"><span class="text-xl">ğŸŒ™</span><div><div class="font-medium">02:00</div><div class="text-xs text-slate-500" data-en="Deep Sync" data-uk="Ğ“Ğ»Ğ¸Ğ±Ğ¾ĞºĞ° ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ñ–Ğ·Ğ°Ñ†Ñ–Ñ">Deep Sync</div></div></div>
                            <span class="px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full font-medium">30 <span data-en="days" data-uk="Ğ´Ğ½Ñ–Ğ²">days</span></span>
                        </div>
                        <div class="schedule-item flex items-center justify-between p-3 bg-slate-50 rounded-lg transition-all">
                            <div class="flex items-center gap-3"><span class="text-xl">â˜€ï¸</span><div><div class="font-medium">06:00, 10:00, 14:00, 18:00</div><div class="text-xs text-slate-500" data-en="Quick Sync" data-uk="Ğ¨Ğ²Ğ¸Ğ´ĞºĞ° ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ñ–Ğ·Ğ°Ñ†Ñ–Ñ">Quick Sync</div></div></div>
                            <span class="px-2 py-1 bg-slate-200 text-slate-700 text-xs rounded-full font-medium">7 <span data-en="days" data-uk="Ğ´Ğ½Ñ–Ğ²">days</span></span>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-lg mb-4 text-slate-800 flex items-center gap-2">
                        <span class="w-3 h-3 bg-emerald-400 rounded-full"></span>
                        <span data-en="SP-API Schedule (Kyiv)" data-uk="SP-API Ğ Ğ¾Ğ·ĞºĞ»Ğ°Ğ´ (ĞšĞ¸Ñ—Ğ²)">SP-API Schedule (Kyiv)</span>
                    </h3>
                    <div class="space-y-2">
                        <div class="schedule-item flex items-center justify-between p-3 bg-slate-50 rounded-lg transition-all">
                            <div class="flex items-center gap-3"><span class="text-xl">ğŸ“Š</span><div><div class="font-medium">03:00</div><div class="text-xs text-slate-500">Settlements, Fees, Listings</div></div></div>
                            <span class="px-2 py-1 bg-emerald-100 text-emerald-700 text-xs rounded-full font-medium">daily</span>
                        </div>
                        <div class="schedule-item flex items-center justify-between p-3 bg-slate-50 rounded-lg transition-all">
                            <div class="flex items-center gap-3"><span class="text-xl">ğŸ”„</span><div><div class="font-medium">04:00, 08:00, 12:00, 16:00, 20:00</div><div class="text-xs text-slate-500">Inventory, Orders</div></div></div>
                            <span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-medium">4h</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                <h3 class="font-bold text-lg mb-4 text-slate-800" data-en="System Efficiency" data-uk="Ğ•Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ñ–ÑÑ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸">System Efficiency</h3>
                <div class="chart-container"><canvas id="efficiencyChart"></canvas></div>
            </div>

            <!-- Telegram Preview on Dashboard -->
            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                <h3 class="font-bold text-lg mb-4 text-slate-800 flex items-center gap-2">
                    <i class="fa-brands fa-telegram text-blue-500"></i>
                    <span data-en="Notification Examples" data-uk="ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´Ğ¸ ÑĞ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½ÑŒ">Notification Examples</span>
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="p-4 bg-slate-50 rounded-lg text-center"><div class="text-2xl mb-2">ğŸ”‡</div><div class="font-bold text-sm" data-en="All OK" data-uk="Ğ’ÑĞµ ĞĞš">All OK</div><div class="text-xs text-slate-500" data-en="Silence" data-uk="Ğ¢Ğ¸ÑˆĞ°">Silence</div></div>
                    <div class="p-4 bg-yellow-50 rounded-lg text-center"><div class="text-2xl mb-2">âš ï¸</div><div class="font-bold text-sm">Warning</div><div class="text-xs text-slate-500">Data &lt; 60%</div></div>
                    <div class="p-4 bg-red-50 rounded-lg text-center"><div class="text-2xl mb-2">ğŸ”´</div><div class="font-bold text-sm">Critical</div><div class="text-xs text-slate-500">Data &lt; 30%</div></div>
                    <div class="p-4 bg-red-50 rounded-lg text-center"><div class="text-2xl mb-2">âŒ</div><div class="font-bold text-sm">Error</div><div class="text-xs text-slate-500" data-en="System failure" data-uk="Ğ—Ğ±Ñ–Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸">System failure</div></div>
                </div>
            </div>
        </div>

        <!-- 2. EXECUTION -->
        <div id="view-execution" class="hidden space-y-6">
            <div class="bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-xl shadow-lg text-white">
                <div class="flex items-center justify-between mb-4">
                    <div><h3 class="text-xl font-bold" data-en="Latest Execution" data-uk="ĞÑÑ‚Ğ°Ğ½Ğ½Ñ” Ğ²Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ½Ñ">Latest Execution</h3><p class="text-blue-100 text-sm">Dec 09, 2025 02:00 Kyiv</p></div>
                    <div class="text-right"><div class="text-3xl font-bold">54 <span data-en="min" data-uk="Ñ…Ğ²">min</span></div></div>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="bg-white bg-opacity-20 rounded-lg p-3"><div class="text-2xl font-bold">71.7K</div><div class="text-xs text-blue-100">Rows ADS</div></div>
                    <div class="bg-white bg-opacity-20 rounded-lg p-3"><div class="text-2xl font-bold">6K</div><div class="text-xs text-blue-100">Rows SP-API</div></div>
                    <div class="bg-white bg-opacity-20 rounded-lg p-3"><div class="text-2xl font-bold">3/3</div><div class="text-xs text-blue-100">ADS Loaders</div></div>
                    <div class="bg-white bg-opacity-20 rounded-lg p-3"><div class="text-2xl font-bold">100%</div><div class="text-xs text-blue-100">Success</div></div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                <h3 class="font-bold text-lg mb-4 text-slate-800" data-en="ADS Loaders" data-uk="ADS Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ÑƒĞ²Ğ°Ñ‡Ñ–">ADS Loaders</h3>
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-4 bg-slate-50 rounded-lg"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center text-xl">ğŸ“¦</div><div><div class="font-bold">SP Loader</div><div class="text-xs text-slate-500">15 min â€¢ 68,300 rows</div></div></div><span class="px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-bold">âœ… SUCCESS</span></div>
                    <div class="flex items-center justify-between p-4 bg-slate-50 rounded-lg"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-pink-100 rounded-lg flex items-center justify-center text-xl">ğŸ§²</div><div><div class="font-bold">SB Loader</div><div class="text-xs text-slate-500">14 min â€¢ 1,800 rows</div></div></div><span class="px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-bold">âœ… SUCCESS</span></div>
                    <div class="flex items-center justify-between p-4 bg-slate-50 rounded-lg"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center text-xl">ğŸ¯</div><div><div class="font-bold">SD Loader</div><div class="text-xs text-slate-500">16 min â€¢ 1,600 rows</div></div></div><span class="px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-bold">âœ… SUCCESS</span></div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                <h3 class="font-bold text-lg mb-4 text-slate-800" data-en="SP-API Reports" data-uk="SP-API Ğ—Ğ²Ñ–Ñ‚Ğ¸">SP-API Reports</h3>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                    <div class="p-3 bg-emerald-50 border border-emerald-200 rounded-lg"><span class="text-sm font-medium">fba_inventory</span><span class="text-emerald-600 font-bold text-xs float-right">âœ… 1,500</span></div>
                    <div class="p-3 bg-emerald-50 border border-emerald-200 rounded-lg"><span class="text-sm font-medium">orders_by_date</span><span class="text-emerald-600 font-bold text-xs float-right">âœ… 3,200</span></div>
                    <div class="p-3 bg-emerald-50 border border-emerald-200 rounded-lg"><span class="text-sm font-medium">settlements</span><span class="text-emerald-600 font-bold text-xs float-right">âœ… 850</span></div>
                    <div class="p-3 bg-emerald-50 border border-emerald-200 rounded-lg"><span class="text-sm font-medium">fba_fees</span><span class="text-emerald-600 font-bold text-xs float-right">âœ… 490</span></div>
                    <div class="p-3 bg-slate-50 border border-slate-200 rounded-lg"><span class="text-sm font-medium text-slate-500">storage_fees</span><span class="text-slate-400 font-bold text-xs float-right">âšª 0</span></div>
                    <div class="p-3 bg-emerald-50 border border-emerald-200 rounded-lg"><span class="text-sm font-medium">merchant_listings</span><span class="text-emerald-600 font-bold text-xs float-right">âœ… 450</span></div>
                </div>
            </div>

            <!-- Telegram Examples in Execution -->
            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                <h3 class="font-bold text-lg mb-4 text-slate-800 flex items-center gap-2"><i class="fa-brands fa-telegram text-blue-500"></i> <span data-en="Telegram Alerts" data-uk="Telegram ÑĞ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ">Telegram Alerts</span></h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div><div class="text-xs text-emerald-600 uppercase mb-2">âœ… Success</div><div class="telegram-msg text-sm text-white"><div class="font-bold mb-1">âœ… ADS LOADER</div><div class="text-slate-400 text-xs mb-2">ğŸ“… 7Ğ´ | â±ï¸ 45Ñ…Ğ²</div><div class="text-slate-300 text-xs">ğŸ“¦ SP: âœ… 68,300<br>ğŸ§² SB: âœ… 1,800<br>ğŸ¯ SD: âœ… 1,600</div><div class="mt-2 pt-2 border-t border-slate-700 text-xs text-slate-400">ğŸ’¾ 71,700 | â³ 14:00</div></div></div>
                    <div><div class="text-xs text-yellow-600 uppercase mb-2">âš ï¸ Warning</div><div class="telegram-msg text-sm text-white"><div class="font-bold text-yellow-400 mb-2">âš ï¸ DATA WARNING</div><div class="text-slate-300 text-xs">ğŸ“Š ads_sp_campaign<br>ğŸ”¢ 45,000 (Ğ½Ğ¾Ñ€Ğ¼Ğ°: 68,000)<br>ğŸ“‰ 66%</div></div></div>
                    <div><div class="text-xs text-red-600 uppercase mb-2">âŒ Error</div><div class="telegram-msg text-sm text-white"><div class="font-bold text-red-400 mb-2">âŒ SP-API FAILED</div><div class="text-slate-300 text-xs">â„¹ï¸ Token Error: LWA expired</div></div></div>
                </div>
            </div>
        </div>

        <!-- 3. ARCHITECTURE -->
        <div id="view-architecture" class="hidden space-y-6">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-lg mb-4 text-slate-800" data-en="Project Structure" data-uk="Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ">Project Structure</h3>
                    <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm text-slate-300 overflow-x-auto">
<pre><span class="text-blue-400">project/</span>
â”œâ”€â”€ <span class="text-yellow-400">ğŸ“ Config</span>
â”‚   â”œâ”€â”€ .env
â”‚   â”œâ”€â”€ telegram_subscribers.json <span class="text-emerald-400">NEW</span>
â”‚   â””â”€â”€ circuit_state.json
â”‚
â”œâ”€â”€ <span class="text-purple-400">ğŸ“ Core</span>
â”‚   â”œâ”€â”€ <span class="text-white font-bold">run_forever.py</span> <span class="text-emerald-400">â† Unified</span>
â”‚   â”œâ”€â”€ master_ads_loader_v4.py
â”‚   â”œâ”€â”€ base_loader.py
â”‚   â”œâ”€â”€ circuit_breaker.py
â”‚   â””â”€â”€ <span class="text-white font-bold">telegram_notifier.py</span> <span class="text-emerald-400">v3.1</span>
â”‚
â”œâ”€â”€ <span class="text-orange-400">ğŸ“ Ads Workers</span>
â”‚   â”œâ”€â”€ sp_loader_4h_senior.py
â”‚   â”œâ”€â”€ sb_loader_4h_senior.py
â”‚   â””â”€â”€ sd_loader_4h_senior.py
â”‚
â””â”€â”€ <span class="text-emerald-400">ğŸ“ SPAPI_Workers</span> <span class="text-emerald-400">NEW</span>
    â”œâ”€â”€ spapi_base.py
    â”œâ”€â”€ spapi_config.py
    â””â”€â”€ spapi_loader.py</pre>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-lg mb-4 text-slate-800" data-en="System Flow" data-uk="ĞŸĞ¾Ñ‚Ñ–Ğº ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸">System Flow</h3>
                    <div class="space-y-4">
                        <div class="flex items-center gap-4"><div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center text-blue-600 font-bold">1</div><div><div class="font-bold">run_forever.py</div><div class="text-xs text-slate-500" data-en="Scheduler + Telegram Bot" data-uk="ĞŸĞ»Ğ°Ğ½ÑƒĞ²Ğ°Ğ»ÑŒĞ½Ğ¸Ğº + Telegram Bot">Scheduler + Telegram Bot</div></div></div>
                        <div class="ml-6 border-l-2 border-slate-200 h-4"></div>
                        <div class="flex items-center gap-4"><div class="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center text-orange-600 font-bold">2a</div><div><div class="font-bold">master_ads_loader_v4.py</div><div class="text-xs text-slate-500">SP, SB, SD (parallel)</div></div></div>
                        <div class="flex items-center gap-4"><div class="w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center text-emerald-600 font-bold">2b</div><div><div class="font-bold">spapi_loader.py</div><div class="text-xs text-slate-500">Inventory, Orders, Settlements</div></div></div>
                        <div class="ml-6 border-l-2 border-slate-200 h-4"></div>
                        <div class="flex items-center gap-4"><div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center text-purple-600 font-bold">3</div><div><div class="font-bold">PostgreSQL</div><div class="text-xs text-slate-500">UPSERT + Schema Evolution</div></div></div>
                        <div class="ml-6 border-l-2 border-slate-200 h-4"></div>
                        <div class="flex items-center gap-4"><div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center text-blue-600 font-bold">4</div><div><div class="font-bold">telegram_notifier.py</div><div class="text-xs text-slate-500" data-en="Alerts on errors" data-uk="Ğ¡Ğ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ¼Ğ¸Ğ»ĞºĞ°Ñ…">Alerts on errors</div></div></div>
                    </div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                <h3 class="font-bold text-lg mb-4 text-slate-800" data-en="API Ecosystem" data-uk="Ğ•ĞºĞ¾ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° API">API Ecosystem</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="p-4 border-l-4 border-orange-400 bg-orange-50 rounded-r-lg">
                        <div class="font-bold text-slate-800">Amazon Ads API</div>
                        <div class="text-xs text-slate-500 font-mono mt-1">advertising-api.amazon.com</div>
                        <div class="flex gap-2 mt-3"><span class="px-2 py-1 bg-white text-xs rounded">SP</span><span class="px-2 py-1 bg-white text-xs rounded">SB</span><span class="px-2 py-1 bg-white text-xs rounded">SD</span></div>
                        <p class="text-sm text-slate-600 mt-3" data-en="Impressions, Clicks, ACOS, ROAS" data-uk="ĞŸĞ¾ĞºĞ°Ğ·Ğ¸, ĞšĞ»Ñ–ĞºĞ¸, ACOS, ROAS">Impressions, Clicks, ACOS, ROAS</p>
                    </div>
                    <div class="p-4 border-l-4 border-emerald-400 bg-emerald-50 rounded-r-lg">
                        <div class="font-bold text-slate-800">Selling Partner API</div>
                        <div class="text-xs text-slate-500 font-mono mt-1">sellingpartnerapi-na.amazon.com</div>
                        <div class="flex gap-2 mt-3"><span class="px-2 py-1 bg-white text-xs rounded">Inventory</span><span class="px-2 py-1 bg-white text-xs rounded">Orders</span><span class="px-2 py-1 bg-white text-xs rounded">Finance</span></div>
                        <p class="text-sm text-slate-600 mt-3" data-en="Inventory, Orders, Settlements, Fees" data-uk="Ğ†Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€, Ğ—Ğ°Ğ¼Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ, Ğ Ğ¾Ğ·Ñ€Ğ°Ñ…ÑƒĞ½ĞºĞ¸, ĞšĞ¾Ğ¼Ñ–ÑÑ–Ñ—">Inventory, Orders, Settlements, Fees</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. FEATURES -->
        <div id="view-features" class="hidden space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-lg mb-4 text-slate-800" data-en="System Capabilities" data-uk="ĞœĞ¾Ğ¶Ğ»Ğ¸Ğ²Ğ¾ÑÑ‚Ñ– ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸">System Capabilities</h3>
                    <div class="chart-container"><canvas id="featuresChart"></canvas></div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-lg mb-4 text-slate-800" data-en="Feature List" data-uk="Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¼Ğ¾Ğ¶Ğ»Ğ¸Ğ²Ğ¾ÑÑ‚ĞµĞ¹">Feature List</h3>
                    <div class="space-y-4">
                        <div class="p-4 border-l-4 border-emerald-500 bg-emerald-50 rounded-r-lg"><div class="font-bold text-slate-800">Anti-Zombie</div><p class="text-sm text-slate-600 mt-1" data-en="10 NULL â†’ self-terminate" data-uk="10 NULL â†’ ÑĞ°Ğ¼Ğ¾-Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ½Ñ">10 NULL â†’ self-terminate</p></div>
                        <div class="p-4 border-l-4 border-blue-500 bg-blue-50 rounded-r-lg"><div class="font-bold text-slate-800">Circuit Breaker</div><p class="text-sm text-slate-600 mt-1" data-en="3 failures â†’ 30min cooldown" data-uk="3 Ğ·Ğ±Ğ¾Ñ— â†’ 30Ñ…Ğ² Ğ¿Ğ°ÑƒĞ·Ğ°">3 failures â†’ 30min cooldown</p></div>
                        <div class="p-4 border-l-4 border-purple-500 bg-purple-50 rounded-r-lg"><div class="font-bold text-slate-800">Auto-Fix</div><p class="text-sm text-slate-600 mt-1" data-en="400 errors â†’ remove bad columns" data-uk="400 Ğ¿Ğ¾Ğ¼Ğ¸Ğ»ĞºĞ¸ â†’ Ğ²Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸">400 errors â†’ remove bad columns</p></div>
                        <div class="p-4 border-l-4 border-orange-500 bg-orange-50 rounded-r-lg"><div class="font-bold text-slate-800">Schema Evolution</div><p class="text-sm text-slate-600 mt-1" data-en="Auto-add new columns" data-uk="ĞĞ²Ñ‚Ğ¾-Ğ´Ğ¾Ğ´Ğ°Ğ²Ğ°Ğ½Ğ½Ñ ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ğº">Auto-add new columns</p></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 5. LOGIC & API -->
        <div id="view-logic" class="hidden space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-lg mb-4 text-slate-800" data-en="Exit Codes" data-uk="Exit Codes">Exit Codes</h3>
                    <div class="space-y-3">
                        <div class="flex items-center p-3 bg-emerald-50 rounded-lg"><span class="w-10 h-10 flex items-center justify-center bg-emerald-500 text-white font-mono font-bold rounded mr-3">0</span><div><div class="font-bold" data-en="Success" data-uk="Ğ£ÑĞ¿Ñ–Ñ…">Success</div><div class="text-xs text-slate-500" data-en="Completed" data-uk="Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾">Completed</div></div></div>
                        <div class="flex items-center p-3 bg-red-50 rounded-lg"><span class="w-10 h-10 flex items-center justify-center bg-red-500 text-white font-mono font-bold rounded mr-3">1</span><div><div class="font-bold" data-en="Error" data-uk="ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ°">Error</div><div class="text-xs text-slate-500" data-en="Critical failure" data-uk="ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¹ Ğ·Ğ±Ñ–Ğ¹">Critical failure</div></div></div>
                        <div class="flex items-center p-3 bg-blue-50 rounded-lg"><span class="w-10 h-10 flex items-center justify-center bg-blue-500 text-white font-mono font-bold rounded mr-3">2</span><div><div class="font-bold" data-en="Auto-Fixed" data-uk="ĞĞ²Ñ‚Ğ¾-Ğ²Ğ¸Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾">Auto-Fixed</div><div class="text-xs text-slate-500" data-en="Self-corrected" data-uk="Ğ¡Ğ°Ğ¼Ğ¾-Ğ²Ğ¸Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾">Self-corrected</div></div></div>
                        <div class="flex items-center p-3 bg-slate-50 rounded-lg"><span class="w-10 h-10 flex items-center justify-center bg-slate-500 text-white font-mono font-bold rounded mr-3">143</span><div><div class="font-bold">SIGTERM</div><div class="text-xs text-slate-500">Graceful shutdown</div></div></div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-lg mb-4 text-slate-800" data-en="SP-API Reports (30+)" data-uk="SP-API Ğ—Ğ²Ñ–Ñ‚Ğ¸ (30+)">SP-API Reports (30+)</h3>
                    <div class="grid grid-cols-2 gap-2 text-sm">
                        <div class="p-2 bg-emerald-50 rounded">ğŸ“¦ fba_inventory</div>
                        <div class="p-2 bg-emerald-50 rounded">ğŸ“¦ reserved_inventory</div>
                        <div class="p-2 bg-emerald-50 rounded">ğŸ“¦ afn_inventory</div>
                        <div class="p-2 bg-emerald-50 rounded">ğŸ“¦ stranded_inventory</div>
                        <div class="p-2 bg-blue-50 rounded">ğŸ›’ orders_by_date</div>
                        <div class="p-2 bg-blue-50 rounded">ğŸšš fba_shipments</div>
                        <div class="p-2 bg-blue-50 rounded">â†©ï¸ fba_returns</div>
                        <div class="p-2 bg-yellow-50 rounded">ğŸ’° settlements</div>
                        <div class="p-2 bg-yellow-50 rounded">ğŸ’³ fba_fees</div>
                        <div class="p-2 bg-yellow-50 rounded">ğŸ’³ storage_fees</div>
                        <div class="p-2 bg-yellow-50 rounded">ğŸ’³ referral_fees</div>
                        <div class="p-2 bg-purple-50 rounded">ğŸ“ merchant_listings</div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <script>
        let currentLang = 'en';
        
        function switchLang(lang) {
            currentLang = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`lang-${lang}`).classList.add('active');
            document.querySelectorAll('[data-en]').forEach(el => {
                const text = el.getAttribute(`data-${lang}`);
                if (text) el.textContent = text;
            });
        }

        function switchTab(tabId) {
            const tabs = ['overview', 'execution', 'architecture', 'features', 'logic'];
            tabs.forEach(id => {
                document.getElementById(`view-${id}`).classList.add('hidden');
                document.getElementById(`btn-${id}`).classList.remove('active');
            });
            document.getElementById(`view-${tabId}`).classList.remove('hidden');
            document.getElementById(`btn-${tabId}`).classList.add('active');
        }

        document.addEventListener('DOMContentLoaded', () => {
            const ctxEff = document.getElementById('efficiencyChart');
            if (ctxEff) {
                new Chart(ctxEff.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: ['Downtime (min)', 'Manual Fixes/Week', 'Report Types'],
                        datasets: [
                            { label: 'Old (v3)', data: [180, 5, 10], backgroundColor: '#94a3b8', borderRadius: 6 },
                            { label: 'New (v5)', data: [5, 0, 30], backgroundColor: '#10b981', borderRadius: 6 }
                        ]
                    },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'top' } }, scales: { y: { beginAtZero: true } } }
                });
            }

            const ctxFeat = document.getElementById('featuresChart');
            if (ctxFeat) {
                new Chart(ctxFeat.getContext('2d'), {
                    type: 'radar',
                    data: {
                        labels: ['Reliability', 'Speed', 'Data Integrity', 'Maintainability', 'Scalability'],
                        datasets: [{ label: 'System Score', data: [95, 90, 100, 95, 85], fill: true, backgroundColor: 'rgba(59, 130, 246, 0.2)', borderColor: '#3b82f6', pointBackgroundColor: '#3b82f6' }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, scales: { r: { suggestedMin: 0, suggestedMax: 100 } } }
                });
            }
        });
    </script>
</body>
</html>
